name       : mongosh
version    : 1.0.5
release    : 2
source     :
    - https://github.com/mongodb-js/mongosh/archive/refs/tags/v1.0.5.tar.gz : ae239e052b0eab3b4b2ace6391d46842702b5d3843920580d06bb4102609865e
homepage   : https://docs.mongodb.com/mongodb-shell/
license    : Apache-2.0
component  : database
summary    : The MongoDB Shell Interpreter
description: |
    The MongoDB Shell, mongosh, is a fully functional JavaScript and Node.js 14.x REPL environment for interacting with MongoDB deployments.
networking : yes
builddeps  :
    - pkgconfig(krb5)
    - pkgconfig(libuv)
    - git
    - nodejs-devel
    - yarn
rundeps    :
    - nodejs
setup      : |
    sed -i "/electron-notarize/d" package.json
    %apply_patches
    rm packages/build/src/packaging/macos-sign*
build      : |
    yarn
    yarn run bootstrap
    yarn run compile-cli
    yarn install --production
install    : |
    install -dm00755 $installdir/usr/bin
    install -dm00755 $installdir/usr/lib/node_modules/mongosh
    cp -R packages node_modules package*.json $installdir/usr/lib/node_modules/mongosh
    ln -s /usr/lib/node_modules/mongosh/packages/cli-repl/bin/mongosh.js $installdir/usr/bin/mongosh
